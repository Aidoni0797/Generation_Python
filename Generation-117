Generation-117

info2 = {
  'age': 30,
  'city': 'New York',
  'email': 'bob@web.com'
}

info1 |= info2
print(info1)

аналогичен предыдущему коду.

Метод setdefault()

Метод setdefault() позволяет получить значение из словаря по заданному ключу, автоматически добавляя элемент словаря, если он отсутствует.

Метод принимает два аргумента:
- key: ключ, значение по которому следует получить, если таковое имеется в словаре, либо создать.
- default: значение, которое будет использовано при добавлении нового элемента в словарь.

В зависимости от значений параметров key и default возможны следующие сценарии работы данного метода.

сценарий 1. Если ключ key присутствует в словаре, то метод возвращает значение по заданному ключу (независимо от того, передан параметр default или нет).

Приведенный ниже код:

info = {'name': 'Bob', 'age': 25}

name1 = info.setdefault('name') # параметр default задан
name2 = info.setdefault('name', 'Max') # параметр default задан

print(name1)
print(name2)

вывод:
Bob
Bob

Сценарий 2. Если ключ key отсутствует в словаре,то метод вставляет переданное значение default по заданному ключу.

Приведенный ниже код:
info = {'name': 'Bob', 'age': 25}

job = info.setdefault('job', 'Dev')
print(info)
print(job)

выводит:
{'name': 'Bob', 'age':25, 'job': 'Dev'}
Dev

При этом если значение default не передано в метод, то вставится значение None

Приведенный ниже код:

info = {'name': 'Bob', 'age': 25}
job = info.setdefault('job')
print(info)
print(job)

выводит:
{'name': 'Bob', 'age': 25, 'job': None}
None

Удаление элементов из словаря
Существует несколько способов удаления элементов из словаря:
- оператор del
- метод pop()
- метод popitem()
- метод clear()

Оператор del

С помощью оператора del можно удалять элементы словаря по определенному ключу.

Приведенный ниже код:
info = {
  'name': 'Sam',
  'age': 28,
  'job': 'Teacher',
  'email': 'timyr-guev@yandex.ru'
}

del info['email'] # удаляем элемент имеющий ключ email
del info['job'] # удаляем элемент имеющий ключ job

выводит (порядок элементов может отличаться):
{'name': 'Same', 'age':28}

Если удаляемого ключа в словаре нет, возникнет ошибка KeyError

Метод pop()

Оператор del удаляет из словаря элемент по заданному ключу вместе с его значением. Если требуется получиьт само значение удалямого элемента, то нужен метод pop().

Приведенный ниже код:
info = {'name': 'Sam',
  'age':28,
  'job':'Teacher',
  'email': 'timyr-guev@yandex.ru'
}

email = info.pop('email') #удаляем элемент по ключу email, возвращая его значение
job = info.pop('job') #удаляем элемент по ключу job, возвращая его значение

print(email)
print(job)
print(info)

выводит:
timyr-guev@yandex.ru
Teacher
{'name':'Sam', 'age':28}

Единственное отличие этого способа удаления от оператора del - он возвращает удаленное значение. В остальном этот способ идентичен оператору del. В частности, если удалямого ключа в словаре нет,
возникнет ошибка KeyError.

Чтобы ошибка не появлялась, этому методу можно передать второй аргумент. Он будет возвращен, если указанного ключа в словаре нет. Это позволяет реализовать безопасное удаление элемента из словаря:

surname = info.pop('surname', None)

Если ключа surname в словаре нет, то в переменной surname будет храниться значение None.

Метод popitem()

Метод popitem() удаляет из словаря последний добавленный элемент и возвращает удаляемый элемент в виде кортежа (ключ, значение).

Приведенный ниже код:
info = {
  'info': 'Bob',
  'age': 25,
  'job': 'Dev'
}
info['surname'] = 'Sinclar'

item = info.popitem()

print(item)
print(info)

выводит:
{'surname', 'Siclar'}
{'name': 'Bob', 'age': 25, 'job': 'Dev'}

В версиях Python ниже 3.6 метод popitem() удалял случайный элемент.

Метод clear()

Метод clear() удаляет все элементы из словаря.
Приведенный ниже код:
info = {
  'name': 'Bob',
  'age': 25,
  'job': 'Dev'
}
info.clear()

print(info)
выводит:
{}

Метод copy()

Метод copy() создает поверхностную покию словаря.

Приведенный ниже код:
info = {
  'name': 'Bob',
  'age': 25,
  'job': 'Dev'
}
info_copy = info.copy()
print(info_copy)
выводит:
{'name': 'Bob', 'age: 25, 'job':'Dev'}
Не стоит путать копирование словаря (метод copy()) и присвоение новой переменной ссылки на старый словарь.

Приведенный ниже код:
info = {
  'name': 'Bob',
  'age': 25,
  'job': 'Dev'
}

new_info = info
new_info['name'] = 'Tim'

print(info)

выводит:
{'name': 'Tim', 'age': 25, 'job': 'Dev'}

Оператор присваивания (=) не копирует словарь? а лишь присваивает ссылку на старый словарь новой переменной№

Таким образом? когда мы изменяем словарь new_info, меняется и словарь info. Если необходимо изменить один словарь, не изменяя второй, используют метод copy().

Приведенный ниже код:
info = {'name': 'Bob',
  'age': 25,
  'job': 'Dev'}

new_info = info.copy()
new_info['name'] = 'Tim'

print(info)
print(new_info)

выводит:
{'name':'Bob', 'age':25,'job':'Dev'}
{'name':'Tim', 'age':25,'job':'Dev'}

Примечания

Примечание 1. Словарь можно использовать вместо нескольких вложенный условий, если вам нужно проверить число на равенство. Напрмиер вместо:

num = int(input())

if num ==1:
  description = 'One'
elif num==2:
  description = 'Two'
elif num==3:
  description = 'Three'
else:
  description = 'Unknown'

print(description)

можно написать:
num = int(input())
description = {1:'One', 2:'Two',3:'Three'}
print(description.get(num, 'Unknown'))

На практике такой код встречается достаточно часто,особенно если в программе необходимо часто осуществлять проверку указанного типа.
